"use strict";(self.webpackChunkfluss_website=self.webpackChunkfluss_website||[]).push([[252],{8453:(e,i,n)=>{n.d(i,{R:()=>c,x:()=>l});var t=n(6540);const s={},r=t.createContext(s);function c(e){const i=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function l(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),t.createElement(r.Provider,{value:i},e.children)}},9189:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"security/authentication","title":"Security Authentication","description":"\x3c!--","source":"@site/versioned_docs/version-0.7/security/authentication.md","sourceDirName":"security","slug":"/security/authentication","permalink":"/docs/security/authentication","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/fluss/edit/main/website/docs/security/authentication.md","tags":[],"version":"0.7","sidebarPosition":2,"frontMatter":{"sidebar_label":"Authentication","title":"Security Authentication","sidebar_position":2},"sidebar":"docsSidebar","previous":{"title":"Security Overview","permalink":"/docs/security/overview"},"next":{"title":"Authorization and ACLs","permalink":"/docs/security/authorization"}}');var s=n(4848),r=n(8453);const c={sidebar_label:"Authentication",title:"Security Authentication",sidebar_position:2},l="Authentication",o={},a=[{value:"Overview",id:"overview",level:2},{value:"PLAINTEXT",id:"plaintext",level:2},{value:"SASL",id:"sasl",level:2},{value:"SASL server side configuration",id:"sasl-server-side-configuration",level:3},{value:"SASL client side configuration",id:"sasl-client-side-configuration",level:3},{value:"Extending Authentication Methods (For Developers)",id:"extending-authentication-methods-for-developers",level:2}];function d(e){const i={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"authentication",children:"Authentication"})}),"\n",(0,s.jsx)(i.p,{children:"Fluss provides a pluggable authentication mechanism, allowing users to configure client and server authentication methods based on their security requirements."}),"\n",(0,s.jsx)(i.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(i.p,{children:"Authentication in Fluss is handled through listeners, where each connection triggers a specific authentication protocol based on the configuration. Supported mechanisms include:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"PLAINTEXT"}),": Default, no authentication."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"SASL"}),": This mechanism is based on SASL (Simple Authentication and Security Layer) authentication. Currently, only SASL/PLAIN is supported, which involves authentication using a username and password."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Custom plugins"}),": Extendable via interfaces for enterprise or third-party integrations."]}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["You can configure different authentication protocols per listener using the ",(0,s.jsx)(i.code,{children:"security.protocol.map"})," property in ",(0,s.jsx)(i.code,{children:"conf/server.yaml"}),"."]}),"\n",(0,s.jsx)(i.h2,{id:"plaintext",children:"PLAINTEXT"}),"\n",(0,s.jsx)(i.p,{children:"The PLAINTEXT authentication method is the default used by Fluss. It does not perform any identity verification and is suitable for:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Local development and debugging."}),"\n",(0,s.jsx)(i.li,{children:"Internal communication within trusted clusters."}),"\n",(0,s.jsx)(i.li,{children:"Lightweight deployments without access control."}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"No additional configuration is required for this mode."}),"\n",(0,s.jsx)(i.h2,{id:"sasl",children:"SASL"}),"\n",(0,s.jsx)(i.p,{children:"This mechanism is based on SASL (Simple Authentication and Security Layer) authentication. Currently, only SASL/PLAIN is supported, which involves authentication using a username and password. It is recommended for production environments."}),"\n",(0,s.jsx)(i.h3,{id:"sasl-server-side-configuration",children:"SASL server side configuration"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Option"}),(0,s.jsx)(i.th,{children:"Type"}),(0,s.jsx)(i.th,{children:"Default Value"}),(0,s.jsx)(i.th,{children:"Description"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"security.sasl.enabled.mechanisms"}),(0,s.jsx)(i.td,{children:"List"}),(0,s.jsx)(i.td,{children:"PLAIN"}),(0,s.jsx)(i.td,{children:"Comma-separated list of enabled SASL mechanisms. Only support PLAIN(which involves authentication using a username and password) now."})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"security.sasl.listener.name.{listenerName}.plain.jaas.config"})}),(0,s.jsx)(i.td,{children:"String"}),(0,s.jsx)(i.td,{children:"(none)"}),(0,s.jsx)(i.td,{children:"JAAS configuration for a specific listener and PLAIN mechanism."})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"security.sasl.plain.jaas.config"})}),(0,s.jsx)(i.td,{children:"String"}),(0,s.jsx)(i.td,{children:"(none)"}),(0,s.jsx)(i.td,{children:"Global JAAS configuration for all listeners using the PLAIN mechanism."})]})]})]}),"\n",(0,s.jsx)(i.p,{children:"\u26a0\ufe0f The system tries to load JAAS configurations in the following order:"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:["Listener-specific config: ",(0,s.jsx)(i.code,{children:"security.sasl.listener.name.{listenerName}.{mechanism}.jaas.config"})]}),"\n",(0,s.jsxs)(i.li,{children:["Mechanism-wide config: ",(0,s.jsx)(i.code,{children:"security.sasl.{mechanism}.jaas.config"})]}),"\n",(0,s.jsxs)(i.li,{children:["System-level fallback: ",(0,s.jsx)(i.code,{children:"-Djava.security.auth.login.config"})," JVM option"]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:'Here is an example where port 9093 requires SASL/PLAIN authentication for the users "admin" and "fluss":'}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-yaml",metastring:'title="conf/server.yaml"',children:'# port 9093 use SASL authentication for clients\nbind.listeners: INTERNAL://localhost:9092, CLIENT://localhost:9093\nadvertised.listeners: CLIENT://host:9093,\nsecurity.protocol.map: CLIENT:SASL, INTERNAL:PLAINTEXT\ninternal.listener.name: INTERNAL\n# use SASL/PLAIN\nsecurity.sasl.enabled.mechanisms: PLAIN\nsecurity.sasl.plain.jaas.config: com.alibaba.fluss.security.auth.sasl.plain.PlainLoginModule required user_admin="admin-pass" user_fluss="fluss-pass";\n'})}),"\n",(0,s.jsx)(i.h3,{id:"sasl-client-side-configuration",children:"SASL client side configuration"}),"\n",(0,s.jsx)(i.p,{children:"Clients must specify the appropriate security protocol and authentication mechanism when connecting to Fluss brokers."}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Option"}),(0,s.jsx)(i.th,{children:"Type"}),(0,s.jsx)(i.th,{children:"Default Value"}),(0,s.jsx)(i.th,{children:"Description"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"client.security.protocol"}),(0,s.jsx)(i.td,{children:"String"}),(0,s.jsx)(i.td,{children:"PLAINTEXT"}),(0,s.jsxs)(i.td,{children:["The security protocol used to communicate with brokers. Currently, only ",(0,s.jsx)(i.code,{children:"PLAINTEXT"})," and ",(0,s.jsx)(i.code,{children:"SASL"})," are supported, the configuration value is case insensitive."]})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"client.security.sasl.mechanism"}),(0,s.jsx)(i.td,{children:"String"}),(0,s.jsx)(i.td,{children:"PLAIN"}),(0,s.jsx)(i.td,{children:"The SASL mechanism used for authentication. Only support PLAIN now, but will support more mechanisms in the future."})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"client.security.sasl.username"}),(0,s.jsx)(i.td,{children:"String"}),(0,s.jsx)(i.td,{children:"(none)"}),(0,s.jsxs)(i.td,{children:["The password to use for client-side SASL JAAS authentication. This is used when the client connects to the Fluss cluster with SASL authentication enabled. If not provided, the username will be read from the JAAS configuration string specified by ",(0,s.jsx)(i.code,{children:"client.security.sasl.jaas.config"}),"."]})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"client.security.sasl.password"}),(0,s.jsx)(i.td,{children:"String"}),(0,s.jsx)(i.td,{children:"(none)"}),(0,s.jsxs)(i.td,{children:["The password to use for client-side SASL JAAS authentication. This is used when the client connects to the Fluss cluster with SASL authentication enabled. If not provided, the password will be read from the JAAS configuration string specified by ",(0,s.jsx)(i.code,{children:"client.security.sasl.jaas.config"}),"."]})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"client.security.sasl.jaas.config"}),(0,s.jsx)(i.td,{children:"String"}),(0,s.jsx)(i.td,{children:"(none)"}),(0,s.jsxs)(i.td,{children:["JAAS configuration for SASL. If not set, fallback to system property ",(0,s.jsx)(i.code,{children:"-Djava.security.auth.login.config"}),"."]})]})]})]}),"\n",(0,s.jsx)(i.p,{children:"Here is an example client configuration in Flink SQL with Catalog:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-sql",metastring:'title="Flink SQL"',children:"CREATE CATALOG fluss_catalog WITH (\n  'type' = 'fluss',\n  'bootstrap.servers' = 'fluss-server-1:9123',\n  'client.security.protocol' = 'SASL',\n  'client.security.sasl.mechanism' = 'PLAIN',\n  'client.security.sasl.username' = '<my-username>',\n  'client.security.sasl.password' = '<my-password>',\n);\n"})}),"\n",(0,s.jsx)(i.h2,{id:"extending-authentication-methods-for-developers",children:"Extending Authentication Methods (For Developers)"}),"\n",(0,s.jsx)(i.p,{children:"Fluss supports custom authentication logic through its plugin architecture."}),"\n",(0,s.jsx)(i.p,{children:"Steps to implement a custom authenticator:"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Implement AuthenticationPlugin Interfaces"}),":\nImplement ",(0,s.jsx)(i.code,{children:"ClientAuthenticationPlugin"})," for client-side logic and implement ",(0,s.jsx)(i.code,{children:"ServerAuthenticationPlugin"})," for server-side logic."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Server-side Plugin Installation"}),":\nBuild the plugin as a standalone JAR and copy it to the Fluss server\u2019s plugin directory: ",(0,s.jsx)(i.code,{children:"<FLUSS_HOME>/plugins/<custom_auth_plugin>/"}),". The server will automatically load the plugin at startup."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Client-side Plugin Packaging"}),"  :\nTo enable plugin functionality on the client side, include the plugin JAR in your application\u2019s classpath. This allows the Fluss client to auto-discover the plugin during runtime."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Configure the desired protocol"}),":"]}),"\n"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"security.protocol.map"})," \u2013 for server-side listener authentication and use the ",(0,s.jsx)(i.code,{children:"com.alibaba.fluss.security.auth.AuthenticationPlugin#authProtocol()"})," as protocol identifier."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"client.security.protocol"})," \u2013 for client-side authentication and use the ",(0,s.jsx)(i.code,{children:"com.alibaba.fluss.security.auth.AuthenticationPlugin#authProtocol()"})," as protocol identifier"]}),"\n"]})]})}function h(e={}){const{wrapper:i}={...(0,r.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);