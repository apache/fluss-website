"use strict";(self.webpackChunkfluss_website=self.webpackChunkfluss_website||[]).push([[8552],{8428:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"maintenance/filesystems/oss","title":"Aliyun OSS","description":"\x3c!--","source":"@site/docs/maintenance/filesystems/oss.md","sourceDirName":"maintenance/filesystems","slug":"/maintenance/filesystems/oss","permalink":"/docs/next/maintenance/filesystems/oss","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/fluss/edit/main/website/docs/maintenance/filesystems/oss.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"Aliyun OSS","sidebar_position":3},"sidebar":"docsSidebar","previous":{"title":"HDFS","permalink":"/docs/next/maintenance/filesystems/hdfs"},"next":{"title":"Amazon S3","permalink":"/docs/next/maintenance/filesystems/s3"}}');var t=s(4848),i=s(8453);const r={title:"Aliyun OSS",sidebar_position:3},a="Aliyun OSS",c={},l=[{value:"OSS: Object Storage Service",id:"oss-object-storage-service",level:2},{value:"Configurations setup",id:"configurations-setup",level:2},{value:"Token-based Authentication",id:"token-based-authentication",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"aliyun-oss",children:"Aliyun OSS"})}),"\n",(0,t.jsx)(n.h2,{id:"oss-object-storage-service",children:"OSS: Object Storage Service"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://www.aliyun.com/product/oss",children:"Aliyun Object Storage Service"})," (Aliyun OSS) is widely used, particularly popular among China\u2019s cloud users, and it provides cloud object storage for a variety of use cases."]}),"\n",(0,t.jsx)(n.h2,{id:"configurations-setup",children:"Configurations setup"}),"\n",(0,t.jsxs)(n.p,{children:["To enabled OSS as remote storage, there are some required configurations that must be add to Fluss' ",(0,t.jsx)(n.code,{children:"server.yaml"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"# The dir that used to be as the remote storage of Fluss\nremote.data.dir: oss://<your-bucket>/path/to/remote/storage\n# Aliyun OSS endpoint to connect to, such as: oss-cn-hangzhou.aliyuncs.com\nfs.oss.endpoint: <your-endpoint>\n# Aliyun STS endpoint to connect to obtain a STS token, such as: sts.cn-hangzhou.aliyuncs.com\nfs.oss.sts.endpoint: <your-sts-endpoint>\n# For the role of the STS token obtained from the STS endpoint, such as: acs:ram::123456789012:role/testrole\nfs.oss.roleArn: <your-role-arn>\n\n# Authentication (choose one option below)\n\n# Option 1: Direct credentials\n# Aliyun access key ID\nfs.oss.accessKeyId: <your-access-key>\n# Aliyun access key secret\nfs.oss.accessKeySecret: <your-secret-key>\n\n# Option 2: Secure credential provider\nfs.oss.credentials.provider: <your-credentials-provider>\n"})}),"\n",(0,t.jsxs)(n.p,{children:["To avoid exposing sensitive access key information directly in the ",(0,t.jsx)(n.code,{children:"server.yaml"}),", you can choose option2 to use a credential provider by setting the ",(0,t.jsx)(n.code,{children:"fs.oss.credentials.provider"})," property."]}),"\n",(0,t.jsx)(n.p,{children:"For example, to use environment variables for credential management:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"fs.oss.credentials.provider: com.aliyun.oss.common.auth.EnvironmentVariableCredentialsProvider\n"})}),"\n",(0,t.jsx)(n.p,{children:"Then, set the following environment variables before starting the Fluss service:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"export OSS_ACCESS_KEY_ID=<your-access-key>\nexport OSS_ACCESS_KEY_SECRET=<your-secret-key>\n"})}),"\n",(0,t.jsx)(n.p,{children:"This approach enhances security by keeping sensitive credentials out of configuration files."}),"\n",(0,t.jsx)(n.h2,{id:"token-based-authentication",children:"Token-based Authentication"}),"\n",(0,t.jsxs)(n.p,{children:["For client to access the remote storage such as reading snapshot or tiered log, client must obtain a STS token from Fluss cluster. So you must\nconfigure ",(0,t.jsx)(n.code,{children:"fs.oss.sts.endpoint"})," and ",(0,t.jsx)(n.code,{children:"fs.oss.roleArn"}),".\n",(0,t.jsx)(n.code,{children:"fs.oss.sts.endpoint"})," is the STS endpoint to obtain a STS token, such as ",(0,t.jsx)(n.code,{children:"sts.cn-hangzhou.aliyuncs.com"})," for hangzhou region, you can\nfind different endpoints for different regions in ",(0,t.jsx)(n.a,{href:"https://help.aliyun.com/zh/ram/developer-reference/api-sts-2015-04-01-endpoint",children:"Aliyun STS Endpoint"}),".\n",(0,t.jsx)(n.code,{children:"fs.oss.roleArn"})," is for the role of the STS token obtained from the STS endpoint, it should be in the format of ",(0,t.jsx)(n.code,{children:"acs:ram::<aliyun-account-id>:role/<role-name>"}),",\nsuch as ",(0,t.jsx)(n.code,{children:"acs:ram::123456789012:role/testrole"}),". Since client will use the STS token to read the remote storage, the role must be granted with the read permission of the remote storage.\nSee more detail in ",(0,t.jsx)(n.a,{href:"https://help.aliyun.com/zh/ram/developer-reference/api-sts-2015-04-01-assumerole",children:"AssumeRole"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Apart from the above configurations, you can also define the configuration keys mentioned in the ",(0,t.jsx)(n.a,{href:"http://hadoop.apache.org/docs/current/hadoop-aliyun/tools/hadoop-aliyun/index.html",children:"Hadoop OSS documentation"}),"\nin the Fluss' ",(0,t.jsx)(n.code,{children:"server.yaml"}),". These configurations defines in Hadoop OSS documentation are advanced configurations which are usually used by performance tuning."]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>a});var o=s(6540);const t={},i=o.createContext(t);function r(e){const n=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);