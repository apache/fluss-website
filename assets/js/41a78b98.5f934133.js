"use strict";(self.webpackChunkfluss_website=self.webpackChunkfluss_website||[]).push([[323],{8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>r});var t=i(6540);const s={},o=t.createContext(s);function l(e){const n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),t.createElement(o.Provider,{value:n},e.children)}},9459:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"dev/ide-setup","title":"IDE Setup","description":"\x3c!--","source":"@site/community/dev/ide-setup.md","sourceDirName":"dev","slug":"/dev/ide-setup","permalink":"/community/dev/ide-setup","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/fluss/edit/main/website/community/dev/ide-setup.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"IDE Setup"},"sidebar":"community","previous":{"title":"Building Fluss","permalink":"/community/dev/building"},"next":{"title":"Fluss Logos","permalink":"/community/fluss-logos"}}');var s=i(4848),o=i(8453);const l={sidebar_position:2,title:"IDE Setup"},r="IDE Setup",a={},c=[{value:"Preparation: Fork and Clone the Fluss Repository",id:"preparation-fork-and-clone-the-fluss-repository",level:2},{value:"IntelliJ IDEA",id:"intellij-idea",level:2},{value:"Importing Fluss",id:"importing-fluss",level:3},{value:"Copyright Profile",id:"copyright-profile",level:3},{value:"Required Plugins",id:"required-plugins",level:3},{value:"Code Formatting",id:"code-formatting",level:4},{value:"Checkstyle For Java",id:"checkstyle-for-java",level:4},{value:"Configure Git Commit Username and Email",id:"configure-git-commit-username-and-email",level:3},{value:"Common Problems",id:"common-problems",level:3},{value:"Compilation fails with <code>invalid flag: --add-exports=java.base/sun.net.util=ALL-UNNAMED</code>",id:"compilation-fails-with-invalid-flag---add-exportsjavabasesunnetutilall-unnamed",level:4},{value:"Compilation fails with <code>package sun.misc does not exist</code>",id:"compilation-fails-with-package-sunmisc-does-not-exist",level:4},{value:"Examples fail with a <code>NoClassDefFoundError</code> for Fluss classes.",id:"examples-fail-with-a-noclassdeffounderror-for-fluss-classes",level:4}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"ide-setup",children:"IDE Setup"})}),"\n",(0,s.jsx)(n.p,{children:"The sections below describe how to import the Fluss project into an IDE\nfor the development of Fluss itself."}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["Whenever something is not working in your IDE, try with the Maven\ncommand line first (",(0,s.jsx)(n.code,{children:"mvn clean package -DskipTests"}),") as it might be your IDE\nthat has a bug or is not properly set up."]})}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["Using the included ",(0,s.jsx)(n.a,{href:"https://maven.apache.org/wrapper/",children:"Maven Wrapper"})," by replacing ",(0,s.jsx)(n.code,{children:"mvn"})," with ",(0,s.jsx)(n.code,{children:"./mvnw"})," ensures that the correct Maven version is used."]})}),"\n",(0,s.jsx)(n.h2,{id:"preparation-fork-and-clone-the-fluss-repository",children:"Preparation: Fork and Clone the Fluss Repository"}),"\n",(0,s.jsxs)(n.p,{children:["Fluss uses ",(0,s.jsx)(n.a,{href:"http://git-scm.com/",children:"git"})," for version control.\nThe Git repository is mirrored to ",(0,s.jsx)(n.a,{href:"https://github.com/alibaba/fluss/",children:"GitHub"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"The common way to merge code changes on GitHub is to fork the repository (creating a copy of the repository to your personal GitHub account so you can modify the source code) and issue a pull request."}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["To fork the Fluss repository, log in with your GitHub account. If you do not have one yet, ",(0,s.jsx)(n.a,{href:"https://github.com/signup",children:"sign up for free"}),". Then, click the ",(0,s.jsx)(n.code,{children:"[Fork]"})," button on the upper right of the ",(0,s.jsx)(n.a,{href:"https://github.com/alibaba/fluss/",children:"Fluss repository"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Clone the ",(0,s.jsx)(n.em,{children:"forked"})," version of the repository over HTTPs or SSH. SSH is recommended but needs to be ",(0,s.jsx)(n.a,{href:"https://docs.github.com/en/authentication/connecting-to-github-with-ssh",children:"explicitly configured"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Clone using HTTPs\ngit clone https://github.com/<your-user-name>/fluss.git\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Clone using SSH\ngit clone git@github.com:<your-user-name>/fluss.git\n"})}),"\n",(0,s.jsx)(n.h2,{id:"intellij-idea",children:"IntelliJ IDEA"}),"\n",(0,s.jsxs)(n.p,{children:["The following guide has been written for ",(0,s.jsx)(n.a,{href:"https://www.jetbrains.com/idea/download/",children:"IntelliJ IDEA"}),"\n2024.3. Some details might differ in other versions. Please make sure to follow all steps"]}),"\n",(0,s.jsx)(n.h3,{id:"importing-fluss",children:"Importing Fluss"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:'Choose "New" \u2192 "Project from Existing Sources".'}),"\n",(0,s.jsx)(n.li,{children:"Select the root folder of the cloned Fluss repository."}),"\n",(0,s.jsx)(n.li,{children:'Choose "Import project from external model" and select "Maven".'}),"\n",(0,s.jsx)(n.li,{children:'Leave the default options and successively click "Next" until you reach the SDK section.'}),"\n",(0,s.jsx)(n.li,{children:'If there is no SDK listed, create one using the "+" sign on the top left.\nSelect "JDK", choose the JDK home directory and click "OK".\nSelect the most suitable JDK version. NOTE: A good rule of thumb is to select\nthe JDK version matching the active Maven profile.'}),"\n",(0,s.jsx)(n.li,{children:'Continue by clicking "Next" until the import is finished.'}),"\n",(0,s.jsxs)(n.li,{children:['Open the "Maven" tab (or right-click on the imported project and find "Maven") and run\n"Generate Sources and Update Folders". Alternatively, you can run\n',(0,s.jsx)(n.code,{children:"mvn clean package -DskipTests"}),"."]}),"\n",(0,s.jsx)(n.li,{children:'Build the Project ("Build" \u2192 "Build Project").'}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"copyright-profile",children:"Copyright Profile"}),"\n",(0,s.jsx)(n.p,{children:"Every file needs to include the Alibaba license as a header. This can be automated in IntelliJ by\nadding a Copyright profile:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:'Go to "Settings" \u2192 "Editor" \u2192 "Copyright" \u2192 "Copyright Profiles".'}),"\n",(0,s.jsx)(n.li,{children:'Add a new profile and name it "Alibaba".'}),"\n",(0,s.jsx)(n.li,{children:"Add the following text as the license text:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:'Licensed to the Apache Software Foundation (ASF) under one\nor more contributor license agreements.  See the NOTICE file\ndistributed with this work for additional information\nregarding copyright ownership.  The ASF licenses this file\nto you under the Apache License, Version 2.0 (the\n"License"); you may not use this file except in compliance\nwith the License.  You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'})}),"\n",(0,s.jsxs)(n.ol,{start:"4",children:["\n",(0,s.jsx)(n.li,{children:'Go to "Editor" \u2192 "Copyright" and choose the "Alibaba" profile as the default profile for this\nproject.'}),"\n",(0,s.jsx)(n.li,{children:'Click "Apply".'}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"required-plugins",children:"Required Plugins"}),"\n",(0,s.jsx)(n.p,{children:'Go to "Settings" \u2192 "Plugins" and select the "Marketplace" tab. Search for the following plugins,\ninstall them, and restart the IDE if prompted:'}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://plugins.jetbrains.com/plugin/22113-save-actions-x",children:"Save Actions X"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://plugins.jetbrains.com/plugin/1065-checkstyle-idea",children:"Checkstyle-IDEA"})}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["You will also need to install the ",(0,s.jsx)(n.a,{href:"https://github.com/google/google-java-format",children:"google-java-format"}),"\nplugin. However, a specific version of this plugin is required. Download\n",(0,s.jsx)(n.a,{href:"https://plugins.jetbrains.com/plugin/8527-google-java-format/versions/stable/115957",children:"google-java-format v1.7.0.6"}),"\nand install it as follows. ",(0,s.jsx)(n.strong,{children:"Make sure to never update this plugin"}),"."]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:'Go to "Settings" \u2192 "Plugins".'}),"\n",(0,s.jsx)(n.li,{children:'Click the gear icon and select "Install Plugin from Disk".'}),"\n",(0,s.jsx)(n.li,{children:"Navigate to the downloaded ZIP file and select it."}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"code-formatting",children:"Code Formatting"}),"\n",(0,s.jsxs)(n.p,{children:["Fluss uses ",(0,s.jsx)(n.a,{href:"https://github.com/diffplug/spotless/tree/main/plugin-maven",children:"Spotless"})," together with\n",(0,s.jsx)(n.a,{href:"https://github.com/google/google-java-format",children:"google-java-format"})," to format the Java code."]}),"\n",(0,s.jsx)(n.p,{children:"It is recommended to automatically format your code by applying the following settings:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:'Go to "Settings" \u2192 "Other Settings" \u2192 "google-java-format Settings".'}),"\n",(0,s.jsx)(n.li,{children:"Tick the checkbox to enable the plugin."}),"\n",(0,s.jsx)(n.li,{children:'Change the code style to "Android Open Source Project (AOSP) style".'}),"\n",(0,s.jsx)(n.li,{children:'Go to "Settings" \u2192 "Tools" \u2192 "Actions on Save".'}),"\n",(0,s.jsx)(n.li,{children:'Under "Formatting Actions", select "Optimize imports" and "Reformat code".'}),"\n",(0,s.jsx)(n.li,{children:'From the "All file types list" next to "Reformat code", select Java and Scala.'}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"For earlier IntelliJ IDEA versions:"}),"\n",(0,s.jsxs)(n.ol,{start:"4",children:["\n",(0,s.jsx)(n.li,{children:'Go to "Settings" \u2192 "Other Settings" \u2192 "Save Actions".'}),"\n",(0,s.jsx)(n.li,{children:'Under "General", enable your preferred settings for when to format the code, e.g. "Activate save actions on save".'}),"\n",(0,s.jsx)(n.li,{children:'Under "Formatting Actions", select "Optimize imports" and "Reformat file".'}),"\n",(0,s.jsxs)(n.li,{children:['Under "File Path Inclusions", add an entry for ',(0,s.jsx)(n.code,{children:".*\\.java"})," to avoid formatting other file types."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["You can also format the whole project via Maven by using ",(0,s.jsx)(n.code,{children:"mvn spotless:apply"}),"."]}),"\n",(0,s.jsx)(n.h4,{id:"checkstyle-for-java",children:"Checkstyle For Java"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://checkstyle.sourceforge.io/",children:"Checkstyle"})," is used to enforce static coding guidelines."]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:'Go to "Settings" \u2192 "Tools" \u2192 "Checkstyle".'}),"\n",(0,s.jsx)(n.li,{children:'Set "Scan Scope" to "Only Java sources (including tests)".'}),"\n",(0,s.jsx)(n.li,{children:'For "Checkstyle Version" select "9.3".'}),"\n",(0,s.jsx)(n.li,{children:'Under "Configuration File" click the "+" icon to add a new configuration.'}),"\n",(0,s.jsx)(n.li,{children:'Set "Description" to "Fluss".'}),"\n",(0,s.jsxs)(n.li,{children:['Select "Use a local Checkstyle file" and point it to ',(0,s.jsx)(n.code,{children:"tools/maven/checkstyle.xml"})," located within\nyour cloned repository."]}),"\n",(0,s.jsx)(n.li,{children:'Select "Store relative to project location" and click "Next".'}),"\n",(0,s.jsxs)(n.li,{children:["Configure the property ",(0,s.jsx)(n.code,{children:"checkstyle.suppressions.file"})," with the value ",(0,s.jsx)(n.code,{children:"suppressions.xml"}),' and click\n"Next".']}),"\n",(0,s.jsx)(n.li,{children:'Click "Finish".'}),"\n",(0,s.jsx)(n.li,{children:'Select "Fluss" as the only active configuration file and click "Apply".'}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"You can now import the Checkstyle configuration for the Java code formatter."}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:'Go to "Settings" \u2192 "Editor" \u2192 "Code Style" \u2192 "Java".'}),"\n",(0,s.jsx)(n.li,{children:'Click the gear icon next to "Scheme" and select "Import Scheme" \u2192 "Checkstyle Configuration".'}),"\n",(0,s.jsxs)(n.li,{children:["Navigate to and select ",(0,s.jsx)(n.code,{children:"tools/maven/checkstyle.xml"})," located within your cloned repository."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:'To verify the setup, click "View" \u2192 "Tool Windows" \u2192 "Checkstyle" and find the "Check Module"\nbutton in the opened tool window. It should report no violations.'}),"\n",(0,s.jsx)(n.h3,{id:"configure-git-commit-username-and-email",children:"Configure Git Commit Username and Email"}),"\n",(0,s.jsx)(n.p,{children:"Verify that the Git commit username is set to your preferred name using"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"git config user.name\n"})}),"\n",(0,s.jsx)(n.p,{children:"The set username will be shown in the contributor list in Fluss release notes."}),"\n",(0,s.jsx)(n.p,{children:"To change the username use"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'git config user.name "<Your username>"\n'})}),"\n",(0,s.jsxs)(n.p,{children:["You are free to choose any username you want.\nIn particular, the username does ",(0,s.jsx)(n.em,{children:"not"})," have to correspond to your GitHub username.\nA common choice is simply your full name."]}),"\n",(0,s.jsx)(n.p,{children:"Also verify that the Git commit email address is set to your preferred email address using"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"git config user.email\n"})}),"\n",(0,s.jsx)(n.p,{children:"Make sure that the set email address is an email address that is linked to your GitHub account.\nIf the email address is not linked to your GitHub account, commits in the contribution graph will not be associated with your account."}),"\n",(0,s.jsx)(n.p,{children:"To change the email address use"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'git config user.email "<email address>"\n'})}),"\n",(0,s.jsxs)(n.p,{children:["If you do not want to expose your email address in Git commits, you can activate ",(0,s.jsx)(n.a,{href:"https://docs.github.com/en/account-and-profile/setting-up-and-managing-your-personal-account-on-github/managing-email-preferences/blocking-command-line-pushes-that-expose-your-personal-email-address",children:"GitHub's email privacy setting"})," and set the Git commit email address to the anonymized ",(0,s.jsx)(n.code,{children:"noreply @users.noreply.github.com"})," email address."]}),"\n",(0,s.jsx)(n.admonition,{type:"important",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"When committing from different devices, make sure the username is consistently set on all devices."}),"\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"git config"})," commands above only set the username and email address for the current Git repository. If you want to apply the same settings to all Git repositories on a device, execute the commands with the ",(0,s.jsx)(n.code,{children:"--global"})," option."]}),"\n"]})}),"\n",(0,s.jsx)(n.h3,{id:"common-problems",children:"Common Problems"}),"\n",(0,s.jsx)(n.p,{children:"This section lists issues that developers have run into in the past when working with IntelliJ."}),"\n",(0,s.jsxs)(n.h4,{id:"compilation-fails-with-invalid-flag---add-exportsjavabasesunnetutilall-unnamed",children:["Compilation fails with ",(0,s.jsx)(n.code,{children:"invalid flag: --add-exports=java.base/sun.net.util=ALL-UNNAMED"})]}),"\n",(0,s.jsx)(n.p,{children:'This happens if the "java11" Maven profile is active, but an older JDK version is used. Go to\n"View" \u2192 "Tool Windows" \u2192 "Maven" and uncheck the "java11" profile. Afterwards, reimport the\nproject.'}),"\n",(0,s.jsxs)(n.h4,{id:"compilation-fails-with-package-sunmisc-does-not-exist",children:["Compilation fails with ",(0,s.jsx)(n.code,{children:"package sun.misc does not exist"})]}),"\n",(0,s.jsxs)(n.p,{children:["This happens if you are using JDK 11 and compile to Java 8 with the ",(0,s.jsx)(n.code,{children:"--release"}),' option. This option is currently incompatible with our build setup.\nGo to "Settings" \u2192 "Build, Execution, Deployment" \u2192 "Compiler" \u2192 "Java Compiler" and uncheck the "Use \'--release\' option for cross-compilation (Java 9 and later)".']}),"\n",(0,s.jsxs)(n.h4,{id:"examples-fail-with-a-noclassdeffounderror-for-fluss-classes",children:["Examples fail with a ",(0,s.jsx)(n.code,{children:"NoClassDefFoundError"})," for Fluss classes."]}),"\n",(0,s.jsxs)(n.p,{children:['This happens if Fluss dependencies are set to "provided", resulting in them not being available\non the classpath. You can either check "Include dependencies with \'Provided\' scope" in your\nrun configuration, or create a test that calls the ',(0,s.jsx)(n.code,{children:"main()"})," method of the example."]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);