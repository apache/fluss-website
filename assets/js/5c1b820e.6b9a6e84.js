"use strict";(self.webpackChunkfluss_website=self.webpackChunkfluss_website||[]).push([[1197],{925:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"maintenance/tiered-storage/lakehouse-storage","title":"Lakehouse Storage","description":"Lakehouse represents a new, open architecture that combines the best elements of data lakes and data warehouses.","source":"@site/versioned_docs/version-0.5/maintenance/tiered-storage/lakehouse-storage.md","sourceDirName":"maintenance/tiered-storage","slug":"/maintenance/tiered-storage/lakehouse-storage","permalink":"/docs/0.5/maintenance/tiered-storage/lakehouse-storage","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/fluss/edit/main/website/docs/maintenance/tiered-storage/lakehouse-storage.md","tags":[],"version":"0.5","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"docsSidebar","previous":{"title":"Remote Storage","permalink":"/docs/0.5/maintenance/tiered-storage/remote-storage"},"next":{"title":"Metric Reporters","permalink":"/docs/0.5/maintenance/metric-reporters"}}');var n=t(4848),r=t(8453);const o={sidebar_position:3},i="Lakehouse Storage",l={},c=[{value:"Enable Lakehouse Storage",id:"enable-lakehouse-storage",level:2},{value:"Lakehouse Storage Cluster Configurations",id:"lakehouse-storage-cluster-configurations",level:3},{value:"Start The Datalake Tiering Service",id:"start-the-datalake-tiering-service",level:3},{value:"Enable Lakehouse Storage Per Table",id:"enable-lakehouse-storage-per-table",level:3}];function h(e){const a={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.header,{children:(0,n.jsx)(a.h1,{id:"lakehouse-storage",children:"Lakehouse Storage"})}),"\n",(0,n.jsx)(a.p,{children:"Lakehouse represents a new, open architecture that combines the best elements of data lakes and data warehouses.\nLakehouse combines data lake scalability and cost-effectiveness with data warehouse reliability and performance."}),"\n",(0,n.jsx)(a.p,{children:"Fluss leverages the well-known Lakehouse storage solutions like Apache Paimon, Apache Iceberg, Apache Hudi, Delta Lake as\nthe tiered storage layer. Currently, only Apache Paimon is supported, but more kinds of Lakehouse storage support are on the way."}),"\n",(0,n.jsx)(a.p,{children:"Fluss's datalake tiering service will compact Fluss's data to the Lakehouse storage continuously. The data in Lakehouse storage can be read both by Fluss's client in a streaming manner and accessed directly\nby external systems such as Flink, Spark, StarRocks and others. With data tiered in Lakehouse storage, Fluss\ncan gain much storage cost reduction and analytics performance improvement."}),"\n",(0,n.jsx)(a.h2,{id:"enable-lakehouse-storage",children:"Enable Lakehouse Storage"}),"\n",(0,n.jsx)(a.p,{children:"Lakehouse Storage disabled by default, you must enable it manually."}),"\n",(0,n.jsx)(a.h3,{id:"lakehouse-storage-cluster-configurations",children:"Lakehouse Storage Cluster Configurations"}),"\n",(0,n.jsxs)(a.p,{children:["First, you must configure the lakehouse storage in ",(0,n.jsx)(a.code,{children:"server.yaml"}),". Take Paimon\nas an example, you must configure the following configurations:"]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-yaml",children:"lakehouse.storage: paimon\n\n# the catalog config about Paimon, assuming using Filesystem catalog\npaimon.catalog.type: filesystem\npaimon.catalog.warehouse: /tmp/paimon_data_warehouse\n"})}),"\n",(0,n.jsx)(a.h3,{id:"start-the-datalake-tiering-service",children:"Start The Datalake Tiering Service"}),"\n",(0,n.jsx)(a.p,{children:"Then, you must start the datalake tiering service to compact Fluss's data to the lakehouse storage.\nTo start the datalake tiering service, you must have a Flink cluster running since Fluss currently only supports Flink as a tiering service backend."}),"\n",(0,n.jsx)(a.p,{children:"You can use the following commands to start the datalake tiering service:"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-shell",children:"# change directory to Fluss \ncd $FLUSS_HOME\n\n# start the tiering service, assuming rest endpoint is localhost:8081\n./bin/lakehouse.sh -D flink.rest.address=localhost -D flink.rest.port=8081 \n"})}),"\n",(0,n.jsx)(a.p,{children:(0,n.jsx)(a.strong,{children:"Note:"})}),"\n",(0,n.jsxs)(a.ul,{children:["\n",(0,n.jsxs)(a.li,{children:[(0,n.jsx)(a.code,{children:"flink.rest.address"})," and ",(0,n.jsx)(a.code,{children:"flink.rest.port"})," are the Flink cluster's rest endpoint, you may need to change it according to your Flink cluster's configuration."]}),"\n",(0,n.jsxs)(a.li,{children:["The datalake tiering service is actual a flink job, you can set the Flink configuration in ",(0,n.jsx)(a.code,{children:"-D"})," arguments while starting the datalake tiering service, There are some example commands for reference below."]}),"\n"]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-shell",children:'# If want to set the checkpoint interval to 10s, you can use the following command to start the datalake tiering service\n./bin/lakehouse.sh -D flink.rest.address=localhost -D flink.rest.port=8081 -D flink.execution.checkpointing.interval=10s\n\n# By default, datalake tiering service synchronizes all the tables with datalake enabled to Lakehouse Storage.\n# To distribute the workload of the datalake tiering service through multiple Flink jobs, \n# you can specify the "database" parameter to synchronize only the datalake enabled tables in the specific database.\n./bin/lakehouse.sh -D flink.rest.address=localhost -D flink.rest.port=8081 -D database=fluss_\\\\w+\n'})}),"\n",(0,n.jsx)(a.h3,{id:"enable-lakehouse-storage-per-table",children:"Enable Lakehouse Storage Per Table"}),"\n",(0,n.jsxs)(a.p,{children:["To enable lakehouse storage for a table, the table must be created with the option ",(0,n.jsx)(a.code,{children:"'table.datalake.enabled' = 'true'"}),"."]})]})}function d(e={}){const{wrapper:a}={...(0,r.R)(),...e.components};return a?(0,n.jsx)(a,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},8453:(e,a,t)=>{t.d(a,{R:()=>o,x:()=>i});var s=t(6540);const n={},r=s.createContext(n);function o(e){const a=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function i(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:o(e.components),s.createElement(r.Provider,{value:a},e.children)}}}]);