"use strict";(self.webpackChunkfluss_website=self.webpackChunkfluss_website||[]).push([[4507],{3100:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"maintenance/operations/upgrading","title":"Upgrading and Compatibility","description":"\x3c!--","source":"@site/versioned_docs/version-0.7/maintenance/operations/upgrading.md","sourceDirName":"maintenance/operations","slug":"/maintenance/operations/upgrading","permalink":"/docs/maintenance/operations/upgrading","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/fluss/edit/main/website/docs/maintenance/operations/upgrading.md","tags":[],"version":"0.7","sidebarPosition":1,"frontMatter":{"title":"Upgrading and Compatibility","sidebar_position":1},"sidebar":"docsSidebar","previous":{"title":"Logging","permalink":"/docs/maintenance/observability/logging"},"next":{"title":"Racks","permalink":"/docs/maintenance/operations/racks"}}');var t=s(4848),i=s(8453);const o={title:"Upgrading and Compatibility",sidebar_position:1},l=void 0,a={},d=[{value:"Upgrading the Fluss Server Version",id:"upgrading-the-fluss-server-version",level:2},{value:"Download And Configure Fluss",id:"download-and-configure-fluss",level:3},{value:"Upgrade the TabletServers one-by-one",id:"upgrade-the-tabletservers-one-by-one",level:3},{value:"Upgrade the CoordinatorServer",id:"upgrade-the-coordinatorserver",level:3},{value:"Compatibility between Fluss Client and Fluss Server",id:"compatibility-between-fluss-client-and-fluss-server",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"As an online storage service, Fluss is typically designed to operate over extended periods, often spanning several years.\nLike all long-running services, Fluss requires ongoing maintenance, which includes fixing bugs, implementing improvements,\nand migrating applications to newer versions of the Fluss cluster. In our code design process, we place a strong emphasis\non compatibility to ensure that any updates or changes are seamlessly integrated without disrupting the existing\nfunctionality or stability of the system."}),"\n",(0,t.jsx)(n.p,{children:"This document provides detailed instructions on how to upgrade the Fluss server, as well as information on the\ncompatibility between different versions of the Fluss client and the Fluss server."}),"\n",(0,t.jsx)(n.h2,{id:"upgrading-the-fluss-server-version",children:"Upgrading the Fluss Server Version"}),"\n",(0,t.jsxs)(n.p,{children:["This section outlines the general process for upgrading Fluss across versions. For server upgrades, we recommend using\nthe rolling upgrade method. Specifically, upgrade the ",(0,t.jsx)(n.code,{children:"TabletServers"})," one-by-one first, and then upgrade the ",(0,t.jsx)(n.code,{children:"CoordinatorServer"}),"."]}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"During the server upgrade process, read and write operations in the cluster will not be affected."}),"\n",(0,t.jsxs)(n.li,{children:["Currently, the Fluss ",(0,t.jsx)(n.code,{children:"CoordinatorServer"})," does not yet support high availability (HA). During the ",(0,t.jsx)(n.code,{children:"CoordinatorServer"})," upgrade stage, the ",(0,t.jsx)(n.code,{children:"CoordinatorServer"})," will be in an unavailable state, which will affect admin operations such as table creation."]}),"\n"]})}),"\n",(0,t.jsxs)(n.p,{children:["The following is an example of upgrading the Fluss server from 0.6 to 0.7.0 on\na ",(0,t.jsx)(n.a,{href:"/docs/next/install-deploy/deploying-distributed-cluster",children:"Distributed Cluster"}),":"]}),"\n",(0,t.jsx)(n.h3,{id:"download-and-configure-fluss",children:"Download And Configure Fluss"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"First, download Fluss binary file for 0.7.0:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"tar -xzf fluss-0.7.0-bin.tgz\ncd fluss-0.7.0/\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["If you want to enable ",(0,t.jsx)(n.a,{href:"/docs/next/maintenance/tiered-storage/lakehouse-storage",children:"Lakehouse Storage"}),", you need to prepare the required JAR files for the datalake first. For more details,\nsee ",(0,t.jsx)(n.a,{href:"/docs/next/maintenance/tiered-storage/lakehouse-storage#add-other-jars-required-by-datalake",children:"Add other jars required by datalake"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Next, copy the configuration options from 0.6 (",(0,t.jsx)(n.code,{children:"fluss-0.6/conf/server.yaml"}),") to the new configuration\nfile (",(0,t.jsx)(n.code,{children:"fluss-0.7.0/conf/server.yaml"}),"). Adding any new options introduced in version 0.7.0 as\nneeded to experience the new features."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"upgrade-the-tabletservers-one-by-one",children:"Upgrade the TabletServers one-by-one"}),"\n",(0,t.jsxs)(n.p,{children:["To upgrade the ",(0,t.jsx)(n.code,{children:"TabletServers"}),", follow these steps one-by-one for each ",(0,t.jsx)(n.code,{children:"TabletServer"}),":"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Stop a TabletServer"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"./fluss-0.6/bin/tablet-server.sh stop\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Restart the new TabletServer"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"./fluss-0.7.0/bin/tablet-server.sh start\n"})}),"\n",(0,t.jsx)(n.h3,{id:"upgrade-the-coordinatorserver",children:"Upgrade the CoordinatorServer"}),"\n",(0,t.jsxs)(n.p,{children:["After all ",(0,t.jsx)(n.code,{children:"TabletServers"})," have been upgraded, you can proceed to upgrade the ",(0,t.jsx)(n.code,{children:"CoordinatorServer"})," by following these steps:"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Stop the CoordinatorServer"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"./fluss-0.6/bin/coordinator-server.sh stop\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Restart the new CoordinatorServer"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"./fluss-0.7.0/bin/coordinator-server.sh start\n"})}),"\n",(0,t.jsx)(n.p,{children:"Once this process is complete, the server upgrade will be finished."}),"\n",(0,t.jsx)(n.h2,{id:"compatibility-between-fluss-client-and-fluss-server",children:"Compatibility between Fluss Client and Fluss Server"}),"\n",(0,t.jsx)(n.p,{children:"The compatibility between the Fluss client and the Fluss server is described in the following table:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{}),(0,t.jsx)(n.th,{children:"Server 0.6"}),(0,t.jsx)(n.th,{children:"Server 0.7"}),(0,t.jsx)(n.th,{children:"Limitations"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Client 0.6"}),(0,t.jsx)(n.td,{children:"\u2714\ufe0f"}),(0,t.jsx)(n.td,{children:"\u2714\ufe0f"}),(0,t.jsx)(n.td,{})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Client 0.7"}),(0,t.jsx)(n.td,{children:"\u2714\ufe0f"}),(0,t.jsx)(n.td,{children:"\u2714\ufe0f"}),(0,t.jsx)(n.td,{})]})]})]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>l});var r=s(6540);const t={},i=r.createContext(t);function o(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);