<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-0.7 docs-doc-page docs-doc-id-maintenance/tiered-storage/lakehouse-storage" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Lakehouse Storage | Apache Fluss™ (incubating)</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://fluss.apache.org/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://fluss.apache.org/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://fluss.apache.org/docs/maintenance/tiered-storage/lakehouse-storage/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="0.7"><meta data-rh="true" name="docusaurus_tag" content="docs-default-0.7"><meta data-rh="true" name="docsearch:version" content="0.7"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-0.7"><meta data-rh="true" property="og:title" content="Lakehouse Storage | Apache Fluss™ (incubating)"><meta data-rh="true" name="description" content="&lt;!--"><meta data-rh="true" property="og:description" content="&lt;!--"><link data-rh="true" rel="icon" href="/img/logo/fluss_favicon.svg"><link data-rh="true" rel="canonical" href="https://fluss.apache.org/docs/maintenance/tiered-storage/lakehouse-storage/"><link data-rh="true" rel="alternate" href="https://fluss.apache.org/docs/maintenance/tiered-storage/lakehouse-storage/" hreflang="en"><link data-rh="true" rel="alternate" href="https://fluss.apache.org/docs/maintenance/tiered-storage/lakehouse-storage/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://D8RXQUTC99-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Lakehouse Storage","item":"https://fluss.apache.org/docs/maintenance/tiered-storage/lakehouse-storage"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apache Fluss™ (incubating) RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apache Fluss™ (incubating) Atom Feed">




<link rel="search" type="application/opensearchdescription+xml" title="Apache Fluss™ (incubating)" href="/opensearch.xml">


<link rel="icon" href="/img/logo.svg">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#0071e3"><link rel="stylesheet" href="/assets/css/styles.3ca55d09.css">
<script src="/assets/js/runtime~main.c6bd30b9.js" defer="defer"></script>
<script src="/assets/js/main.4f73c933.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo/svg/colored_logo.svg" alt="Fluss" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo/svg/colored_logo.svg" alt="Fluss" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro/">Docs</a><a class="navbar__item navbar__link" href="/blog/">Blog</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Learn</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/learn/talks/">Talks</a></li><li><a class="dropdown__link" href="/learn/videos/">Videos</a></li></ul></div><a class="navbar__item navbar__link" href="/community/welcome/">Community</a><a class="navbar__item navbar__link" href="/roadmap/">Roadmap</a><a class="navbar__item navbar__link" href="/downloads/">Downloads</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/maintenance/tiered-storage/lakehouse-storage/">0.7</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/maintenance/tiered-storage/lakehouse-storage/">Next</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/maintenance/tiered-storage/lakehouse-storage/">0.7</a></li><li><a class="dropdown__link" href="/docs/0.6/maintenance/tiered-storage/lakehouse-storage/">0.6</a></li><li><a class="dropdown__link" href="/docs/0.5/maintenance/tiered-storage/lakehouse-storage/">0.5</a></li></ul></div><a href="https://github.com/apache/fluss" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/quickstart/flink/">Quick Start</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/concepts/architecture/">Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/install-deploy/overview/">Installation &amp; Deployment</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/table-design/overview/">Table Design</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/engine-flink/getting-started/">Engine Flink</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/streaming-lakehouse/overview/">Streaming Lakehouse</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/maintenance/configuration/">Maintenance</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/maintenance/configuration/">Configuration</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/maintenance/filesystems/overview/">File Systems</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/maintenance/tiered-storage/overview/">Tiered Storage</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/maintenance/tiered-storage/overview/">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/maintenance/tiered-storage/remote-storage/">Remote Storage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/maintenance/tiered-storage/lakehouse-storage/">Lakehouse Storage</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/maintenance/observability/quickstart/">Observability</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/maintenance/operations/upgrading/">Operations</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/security/overview/">Security</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/apis/java-client/">Fluss APIs</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Maintenance</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Tiered Storage</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Lakehouse Storage</span></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 0.7</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Lakehouse Storage</h1></header>
<p>Lakehouse represents a new, open architecture that combines the best elements of data lakes and data warehouses.
Lakehouse combines data lake scalability and cost-effectiveness with data warehouse reliability and performance.</p>
<p>Fluss leverages the well-known Lakehouse storage solutions like Apache Paimon, Apache Iceberg, Apache Hudi, Delta Lake as
the tiered storage layer. Currently, only Apache Paimon is supported, but more kinds of Lakehouse storage support are on the way.</p>
<p>Fluss&#x27;s datalake tiering service will tier Fluss&#x27;s data to the Lakehouse storage continuously. The data in Lakehouse storage can be read both by Fluss&#x27;s client in a streaming manner and accessed directly
by external systems such as Flink, Spark, StarRocks and others. With data tiered in Lakehouse storage, Fluss
can gain much storage cost reduction and analytics performance improvement.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="enable-lakehouse-storage">Enable Lakehouse Storage<a href="#enable-lakehouse-storage" class="hash-link" aria-label="Direct link to Enable Lakehouse Storage" title="Direct link to Enable Lakehouse Storage">​</a></h2>
<p>Lakehouse Storage is disabled by default, you must enable it manually.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lakehouse-storage-cluster-configurations">Lakehouse Storage Cluster Configurations<a href="#lakehouse-storage-cluster-configurations" class="hash-link" aria-label="Direct link to Lakehouse Storage Cluster Configurations" title="Direct link to Lakehouse Storage Cluster Configurations">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="modify-serveryaml">Modify <code>server.yaml</code><a href="#modify-serveryaml" class="hash-link" aria-label="Direct link to modify-serveryaml" title="Direct link to modify-serveryaml">​</a></h4>
<p>First, you must configure the lakehouse storage in <code>server.yaml</code>. Take Paimon as an example, you must configure the following configurations:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token comment" style="color:rgb(106, 153, 85)"># Paimon configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">datalake.format</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> paimon</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># the catalog config about Paimon, assuming using Filesystem catalog</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">datalake.paimon.metastore</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> filesystem</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">datalake.paimon.warehouse</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> /tmp/paimon_data_warehouse</span><br></span></code></pre></div></div>
<p>Fluss processes Paimon configurations by removing the <code>datalake.paimon.</code> prefix and then use the remaining configuration (without the prefix <code>datalake.paimon.</code>) to create the Paimon catalog. Checkout the <a href="https://paimon.apache.org/docs/1.1/maintenance/configurations/" target="_blank" rel="noopener noreferrer">Paimon documentation</a> for more details on the available configurations.</p>
<p>For example, if you want to configure to use Hive catalog, you can configure like following:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token key atrule">datalake.format</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> paimon</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">datalake.paimon.metastore</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> hive</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">datalake.paimon.uri</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> thrift</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain">//&lt;hive</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">metastore</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">host</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">&gt;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain">&lt;port</span><span class="token punctuation" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">datalake.paimon.warehouse</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> hdfs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain">///path/to/warehouse</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="add-other-jars-required-by-datalake">Add other jars required by datalake<a href="#add-other-jars-required-by-datalake" class="hash-link" aria-label="Direct link to Add other jars required by datalake" title="Direct link to Add other jars required by datalake">​</a></h4>
<p>While Fluss includes the core Paimon library, additional jars may still need to be manually added to <code>${FLUSS_HOME}/plugins/paimon/</code> according to your needs.
For example, for OSS filesystem support, you need to put <code>paimon-oss-&lt;paimon_version&gt;.jar</code> into directory <code>${FLUSS_HOME}/plugins/paimon/</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="start-the-datalake-tiering-service">Start The Datalake Tiering Service<a href="#start-the-datalake-tiering-service" class="hash-link" aria-label="Direct link to Start The Datalake Tiering Service" title="Direct link to Start The Datalake Tiering Service">​</a></h3>
<p>Then, you must start the datalake tiering service to tier Fluss&#x27;s data to the lakehouse storage.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h4>
<ul>
<li>A running Flink cluster (currently only Flink is supported as the tiering backend)</li>
<li>Download <a href="https://repo1.maven.org/maven2/com/alibaba/fluss/fluss-flink-tiering/0.7.0/fluss-flink-tiering-0.7.0.jar" target="_blank" rel="noopener noreferrer">fluss-flink-tiering-0.7.0.jar</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="prepare-required-jars">Prepare required jars<a href="#prepare-required-jars" class="hash-link" aria-label="Direct link to Prepare required jars" title="Direct link to Prepare required jars">​</a></h4>
<ul>
<li>Put <a href="/downloads/">fluss-flink connector jar</a> into <code>${FLINK_HOME}/lib</code>, you should choose a connector version matching your Flink version. If you&#x27;re using Flink 1.20, please use <a href="https://repo1.maven.org/maven2/com/alibaba/fluss/fluss-flink-1.20/0.7.0/fluss-flink-1.20-0.7.0.jar" target="_blank" rel="noopener noreferrer">fluss-flink-1.20-0.7.0.jar</a></li>
<li>If you are using <a href="http://aws.amazon.com/s3/" target="_blank" rel="noopener noreferrer">Amazon S3</a>, <a href="https://www.aliyun.com/product/oss" target="_blank" rel="noopener noreferrer">Aliyun OSS</a> or <a href="https://hadoop.apache.org/docs/stable/" target="_blank" rel="noopener noreferrer">HDFS(Hadoop Distributed File System)</a> as Fluss&#x27;s <a href="/docs/maintenance/tiered-storage/remote-storage/">remote storage</a>,
you should download the corresponding <a href="/downloads/#filesystem-jars">Fluss filesystem jar</a> and also put it into <code>${FLINK_HOME}/lib</code></li>
<li>Put <a href="https://repo1.maven.org/maven2/com/alibaba/fluss/fluss-lake-paimon/0.7.0/fluss-lake-paimon-0.7.0.jar" target="_blank" rel="noopener noreferrer">fluss-lake-paimon jar</a> into <code>${FLINK_HOME}/lib</code>, currently only paimon is supported, so you can only choose <code>fluss-lake-paimon</code></li>
<li><a href="https://flink.apache.org/downloads/" target="_blank" rel="noopener noreferrer">Download</a> pre-bundled Hadoop jar <code>flink-shaded-hadoop-2-uber-*.jar</code> and put into <code>${FLINK_HOME}/lib</code></li>
<li>Put Paimon&#x27;s <a href="https://paimon.apache.org/docs/1.1/project/download/" target="_blank" rel="noopener noreferrer">filesystem jar</a> into <code>${FLINK_HOME}/lib</code>, if you use s3 to store paimon data, please put <code>paimon-s3</code> jar into <code>${FLINK_HOME}/lib</code></li>
<li>The other jars that Paimon may require, for example, if you use HiveCatalog, you will need to put hive related jars</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="start-datalake-tiering-service">Start Datalake Tiering Service<a href="#start-datalake-tiering-service" class="hash-link" aria-label="Direct link to Start Datalake Tiering Service" title="Direct link to Start Datalake Tiering Service">​</a></h4>
<p>After the Flink Cluster has been started, you can execute the <code>fluss-flink-tiering-0.7.0.jar</code> by using the following command to start datalake tiering service:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">FLINK_HOME</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain">/bin/flink run /path/to/fluss-flink-tiering-0.7.0.jar </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--fluss.bootstrap.servers</span><span class="token plain"> localhost:9123 </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--datalake.format</span><span class="token plain"> paimon </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--datalake.paimon.metastore</span><span class="token plain"> filesystem </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--datalake.paimon.warehouse</span><span class="token plain"> /tmp/paimon</span><br></span></code></pre></div></div>
<p><strong>Note:</strong></p>
<ul>
<li>The <code>fluss.bootstrap.servers</code> should be the bootstrap server address of your Fluss cluster. You must configure all options with the <code>datalake.</code> prefix in the <a href="#modify-serveryaml">server.yaml</a> file to run the tiering service. In this case, these parameters are <code>--datalake.format</code>, <code>--datalake.paimon.metastore</code>, and <code>--datalake.paimon.warehouse</code>.</li>
<li>The Flink tiering service is stateless, and you can run multiple tiering services simultaneously to tier tables in Fluss.
These tiering services are coordinated by the Fluss cluster to ensure exactly-once semantics when tiering data to the lake storage. This means you can freely scale the service up or down according to your workload.</li>
<li>This follows the standard practice for <a href="https://nightlies.apache.org/flink/flink-docs-release-1.20/docs/deployment/cli/" target="_blank" rel="noopener noreferrer">submitting jobs to Flink</a>, where you can use the <code>-D</code> parameter to specify Flink-related configurations.
For example, if you want to set the tiering service job name to <code>My Fluss Tiering Service1</code> and use <code>3</code> as the job parallelism, you can use the following command:</li>
</ul>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">FLINK_HOME</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain">/bin/flink run </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">-Dpipeline.name</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;My Fluss Tiering Service1&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">-Dparallelism.default</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    /path/to/fluss-flink-tiering-0.7.0.jar </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--fluss.bootstrap.servers</span><span class="token plain"> localhost:9123 </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--datalake.format</span><span class="token plain"> paimon </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--datalake.paimon.metastore</span><span class="token plain"> filesystem </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--datalake.paimon.warehouse</span><span class="token plain"> /tmp/paimon</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="enable-lakehouse-storage-per-table">Enable Lakehouse Storage Per Table<a href="#enable-lakehouse-storage-per-table" class="hash-link" aria-label="Direct link to Enable Lakehouse Storage Per Table" title="Direct link to Enable Lakehouse Storage Per Table">​</a></h3>
<p>To enable lakehouse storage for a table, the table must be created with the option <code>&#x27;table.datalake.enabled&#x27; = &#x27;true&#x27;</code>.</p>
<p>Another option <code>table.datalake.freshness</code>, allows per-table configuration of data freshness in the datalake.
It defines the maximum amount of time that the datalake table&#x27;s content should lag behind updates to the Fluss table.
Based on this target freshness, the Fluss tiering service automatically moves data from the Fluss table and updates to the datalake table, so that the data in the datalake table is kept up to date within this target.
The default is <code>3min</code>, if the data does not need to be as fresh, you can specify a longer target freshness time to reduce costs.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/apache/fluss/edit/main/website/docs/maintenance/tiered-storage/lakehouse-storage.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/maintenance/tiered-storage/remote-storage/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Remote Storage</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/maintenance/observability/quickstart/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Quickstart Guides</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#enable-lakehouse-storage" class="table-of-contents__link toc-highlight">Enable Lakehouse Storage</a><ul><li><a href="#lakehouse-storage-cluster-configurations" class="table-of-contents__link toc-highlight">Lakehouse Storage Cluster Configurations</a></li><li><a href="#start-the-datalake-tiering-service" class="table-of-contents__link toc-highlight">Start The Datalake Tiering Service</a></li><li><a href="#enable-lakehouse-storage-per-table" class="table-of-contents__link toc-highlight">Enable Lakehouse Storage Per Table</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 The Apache Software Foundation.
      Apache®, Apache Flink®, Flink®, Apache Kafka®, Kafka®, Spark® and associated open source project names and logos are trademarks of the Apache Software Foundation.</div></div></div></footer></div>
</body>
</html>